**Messenger Project**

**what are the steps to build Messenger**

the things we need is button input and message
used two state for adding and displaying the messages 
one default value is string and for other its array

created a new component so that we can display that component instead of list 

then used material-ui for do some styling
added prompt to get the username and then saved it in a state

to get the username I used prompt with useEffect(so when logged you need to give username)
added a condition that if the user is typing the text it should be in the right side otherwise left side with the help of conditional operators(conditionally given class)

then added a card of material-ui in the message component

then we used to firestore to save the message in the backend
and using useEffect get the data while refreshing the page


after pushing we need to sort the order based on timestamp 
by default firestore will sort the data alphabetically based on the autogenerated key 



added some animations with react flip move library

for that add foreword ref to the message component
then in the app component import flipmove 
then wrap all the messages that we are rendering using map function inside the flip move 
now we need to add an id so that react will know which element is added so get id from the useEFfect where we used onsnapshot instead of returning doc.data(), return object which has id:doc.id


what are the steps to build Messenger

the things we need is button input and message
used two state for adding and displaying the messages 
one default value is string and for other its array

created a new component so that we can display that component instead of list 

then used material-ui for do some styling
added prompt to get the username and then saved it in a state

to get the username I used prompt with useEffect(so when logged you need to give username)
added a condition that if the user is typing the text it should be in the right side otherwise left side with the help of conditional operators(conditionally given class)

then added a card of material-ui in the message component

then we used to firestore to save the message in the backend
and using useEffect get the data while refreshing the page


after pushing we need to sort the order based on timestamp 
by default firestore will sort the data alphabetically based on the autogenerated key 



added some animations with react flip move library

for that add foreword ref to the message component
then in the app component import flipmove 
then wrap all the messages that we are rendering using map function inside the flip move 
now we need to add an id so that react will know which element is added so get id from the useEFfect where we used onsnapshot instead of returning doc.data(), return object which has id:doc.id


what are the steps to build Messenger

the things we need is button input and message
used two state for adding and displaying the messages 
one default value is string and for other its array

created a new component so that we can display that component instead of list 

then used material-ui for do some styling
added prompt to get the username and then saved it in a state

to get the username I used prompt with useEffect(so when logged you need to give username)
added a condition that if the user is typing the text it should be in the right side otherwise left side with the help of conditional operators(conditionally given class)

then added a card of material-ui in the message component

then we used to firestore to save the message in the backend
and using useEffect get the data while refreshing the page


after pushing we need to sort the order based on timestamp 
by default firestore will sort the data alphabetically based on the autogenerated key 



added some animations with react flip move library

for that add foreword ref to the message component
then in the app component import flipmove 
then wrap all the messages that we are rendering using map function inside the flip move 
now we need to add an id so that react will know which element is added so get id from the useEFfect where we used onsnapshot instead of returning doc.data(), return object which has id:doc.id


**FINAL PARTS **
ADDING LOGO 	
dynamics of image=> this means we are able to add the width and height of the image by adding ?w=100&h=100 at end of src attribute of the image tag

move the input and button to the bottom of the page

change the button to arrow symbol
 
ADDING LOGO 	
dynamics of image=> this means we are able to add the width and height of the image by adding ?w=100&h=100 at end of src attribute of the image tag

move the input and button to the bottom of the page

change the button to arrow symbol

ADDING LOGO 	
dynamics of image=> this means we are able to add the width and height of the image by adding ?w=100&h=100 at end of src attribute of the image tag

move the input and button to the bottom of the page

change the button to arrow symbol




**learnings from building Messenger**

BEM=> in this method the first part is the component and the second part is the element and it will be separated by __

the difference between map and foreach is that the map returns something 

ctrl+ space =>auto import
es7 snippets => extention  used for rafce
ctrl+j =>hide terminal in the vs code
ctrl+b => hide the files section in the vs code


width:fit-content => this means the size of the element we be just fit its content

why dont you use ajax?
its used first for async js we dont use it now because its too complex we need to write complex code for simple things

How initialize firebase/firestore

go to project settings in the firebase and then copy the code for firestore and paste it in a firebase.js file in the src 

in that file to initialize firestore what we need to do is import getFirestore from firebase/firestore 
and use getFirestore in the initialized firebase and store it in a variable called db then export its value

in the firestore what we have is 
a list of collections 
and each collection has a bunch of documents inside it(it will be an array of documents)
then each document inside the array will have the data as an object


How to get the data 
to get to the collection what we have to do is we have to use getDocs(which should be imported).(this is an async task so we need to await )
then we need to get to the list of documents for that what we have to do is we have to pass collection(which should be imported)
the collection will take two arguments they are 
first one is the database that we created (ie the db we created in firebase.js)
and the second one is then name of the collection => this will give the list of the documents now to access each and every single document we need to use map method on this
and to get the data we need to use docs.data(). (where docs is the single douments in the array

**Better way of getting data using onSnapshot();**

we can use onSnapshot method by firestore  which will listens for real-time updates
we can pass two arguments first is collection(db,'message') 
and second is a callback function
and this call back function get called every time the message changes
to get to the list of collections we need to use snapshot.docs
where the snapshot is the value in the callback function

then it will give us the array of documents in that collection in that we can use .data() to get the data(we will get as an object)

we need to save this on to a a variable called unsubscribe then call it in the clean up function (ie the value of the onsnapshot should be stored inside a variable then call that variable in the cleanup function )

the callback function look like this 
(snapshot)=>setMessages(snapshot.docs.map((doc)=>doc.data()));
`


**ADDING DATA TO FIRESTORE**

for this we can use setDoc or addDoc 
first we need to import it from firebase/firestore
the difference between setDoc and addDoc is that addDoc will automatically generate id 
while in setDoc we need to give an id ourself

while using addDoc
await addDoc(collection(db,'collection-name'),{
data to be send})

setDocs 
await setDoc(doc(db,'collection-name','customdocid'),{data})

NOTE=> while using addDoc we pass collection and while using setDoc we pass docs
How to add time stamp while sending data to the firebase 

for this we need to add another key called timestamp into the object which we are going to send 
that key is timestamp
the value of the timestamp is  serverTimeStamp() which we can import from firebase/firestore

what this does is the timezone will be the time of the place were firebase is hosted

 **SORTING THE DATA IN THE FIRESTORE BASED ON TIMESTAMP**

 
in the useEffect which is used for rendering
for adding a timestamp we need to add  a query first 
this query is used to  retrieve documents from the firstore in a specific order

store this query in a variable then pass this to the onsnapshot as the first argument

to the query we need to pass the collection.
the we can add orderBy as a argument to the collection
=> orderBy(which can be imported from firebase/firestore
it takes two arguments they are based on what we need to order 
and second argument is asc or desc 

ie this look like this
const q=query(collection(db,'messages'),orderBy('timestamp',[desc'));
const unsubscribe=onsnapshot(q,(snapshot)=>{...})

**FOR ADDING ANIMATION WE USED REACT FLIP MOVE**

here we need to use forewardRef
forewardRef is an example of higher order function
take the second argument of the forwardRef which is a ref and connect  ref with the top div




